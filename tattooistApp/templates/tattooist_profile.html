{% extends 'base.html' %}
{% load static %}

{% block title %}
Profile of {{ tattooist.nickname }}
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/tattooist_profile.css' %}">
{% endblock %}

{% block content %}
    {% if not is_tattooist %}
    {# ν•΄λ‹Ή μ μ €κ°€ νƒ€ν¬μ΄μ¤νΈκ°€ μ•„λ‹ κ²½μ° #}
        <section>
            <p>ν•΄λ‹Ή μ μ €λ” νƒ€ν¬μ΄μ¤νΈκ°€ μ•„λ‹™λ‹λ‹¤.</p>
        </section>
    {% else %} {# else: not is_tattooist #}
    {# ν•΄λ‹Ή μ μ €κ°€ νƒ€ν¬μ΄μ¤νΈμΈ κ²½μ° #}
        <header style="display: flex; margin-left: 35rem;">
            <div style="flex-direction:column;">
            <p style="text-align:right; font-size:1.5rem;">{{ tattooist.nickname }}</p>
            {% if is_owner %}
                {# ν•΄λ‹Ή νμ΄μ§€μ μ£ΌμΈμΈ κ²½μ° #}
                <p>
                    <a href="{% url 'create_portfolio' %}"><button class="button is-black is-inverted is-outlined" style="margin-right: 15px;">ν¬νΈν΄λ¦¬μ¤ μ‘μ„±</button></a>
                    <button class="button is-black is-inverted is-outlined">ν”„λ΅ν•„ νΈμ§‘</button>
                </p>
            {% else %} {# else: is_owner #}
                {# ν•΄λ‹Ή νμ΄μ§€μ μ£ΌμΈμ΄ μ•„λ‹ κ²½μ° #}
                <div style="margin-top: 10px;">
                    <a href="{% url 'follow_pressed' tattooist.id %}"><button class="button is-danger is-inverted is-outlined" style="margin-right: 15px;">
                        {% if now_following %}
                            β¤ {{ follower_count }}
                        {% else %}
                            π¤ {{ follower_count }}
                        {% endif %}
                    </button></a>
                    {% if request.user.is_authenticated %}
                    {# λ΅κ·ΈμΈν• μ μ €μ—κ²λ§ μ½μ§€ λ³΄λ‚΄κΈ° λ²„νΌμ΄ λ³΄μ„ #}
                    <a href="{% url 'message' request.user.id tattooist.id %}"><button class="button is-black is-inverted is-outlined" style="margin-right: 15px;">μ½μ§€ λ³΄λ‚΄κΈ°</button></a>
                    {% endif %}
                    {% if review_possible %}
                        {# λ¦¬λ·° μ‘μ„±μ΄ κ°€λ¥ν• κ²½μ° #}
                        <a href="{% url 'create_review' tattooist.id %}"><button class="button is-black is-inverted is-outlined">λ¦¬λ·° μ‘μ„±ν•κΈ°</button></a>
                    {% else %}
                        {# λ¦¬λ·° μ‘μ„±μ΄ λ¶κ°€λ¥ν• κ²½μ° #}
                        <button disabled class="button is-black is-inverted is-outlined">λ¦¬λ·° μ‘μ„± λ¶κ°€λ¥</button>
                    {% endif %}
                </div>
            {% endif %} {# endif: is_owner #}
            <br>
            <p style="text-align: right;">
                {{ tattooist.introduce }}
            </p>
            </div>
            <p>
                <img style="width: 10rem; height: 10rem; border-radius: 50%; margin-left: 1rem;" src="{{ tattooist.user_image.url }}" alt="{{ tattooist.nickname }}λ‹μ ν”„λ΅ν•„ μ΄λ―Έμ§€">
            </p>
            
        </header>

        <hr>

        <section>
            {# ν™”λ©΄ μ „ν™ #}
            {% if content_is_portfolio %}
            {# ν¬νΈν΄λ¦¬μ¤ ν™”λ©΄μΈ κ²½μ° #}
            <div class="tabs is-centered">
                <ul>
                    <li class="is-active"><a href="?page=1&menu=portfolio">ν¬νΈν΄λ¦¬μ¤ λ©λ΅</a></li>
                    <li><a href="?page=1&menu=review">λ¦¬λ·° λ©λ΅</a></li>
                </ul>
            </div>
            {% else %}
                {# λ¦¬λ·° ν™”λ©΄μΈ κ²½μ° #}
                <div class="tabs is-centered">
                    <ul>
                        <li><a href="?page=1&menu=portfolio">ν¬νΈν΄λ¦¬μ¤ λ©λ΅</a></li>
                        <li class="is-active"><a href="?page=1&menu=review">λ¦¬λ·° λ©λ΅</a></li>
                    </ul>
                </div>
            {% endif %}

            {% if content_is_portfolio %}
              {# ν¬νΈν΄λ¦¬μ¤ ν™”λ©΄μΈ κ²½μ° #}
              
                {% if portfolios %}
                    {# ν¬νΈν΄λ¦¬μ¤κ°€ μλ” κ²½μ° #}
                    {% for portfolio in portfolios %}
                         <div style="display: inline-block; margin-left: 9%;">
                            <a href="{% url 'detail_portfolio' tattooist.id portfolio.id %}">
                                <img style="width: 15rem; height: 15rem;" src="{{ portfolio.portfolio_image.url }}" alt="ν¬νΈν΄λ¦¬μ¤ μ΄λ―Έμ§€ {{ portfolio.id }}">
                            </a>
                        </div>
                    {% endfor %}
                {% else %}
                    {# ν¬νΈν΄λ¦¬μ¤κ°€ μ—†λ” κ²½μ° #}
                    <div style="text-align: center;">μ‘μ„±λ ν¬νΈν΄λ¦¬μ¤κ°€ μ—†μµλ‹λ‹¤.</div>
                {% endif %}
                <p style="margin-left: 47%;">
                    {# νμ΄μ§€λ„¤μ΄μ… - μ΄μ „ #}
                    {% if portfolios.has_previous %}
                        {# μ΄μ „ νμ΄μ§€κ°€ μμ„ λ•λ§ λ³΄μ„ #}
                        <a href="?page=1&menu=portfolio"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
                        <a href="?page={{ portfolios.previous_page_number }}&menu=portfolio"><i class="fa fa-angle-left"></i></a>
                    {% else %}
                        {# μ΄μ „ νμ΄μ§€κ°€ μ—†μ„ λ• λ³΄μ„ #}
                        <a href="?page=1&menu=portfolio"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                    {% endif %}

                    {# νμ΄μ§€λ„¤μ΄μ… - μ¤‘μ•™ #}
                    <span>{{ portfolios.number }}</span>
                    <span>/</span>
                    <span>{{ portfolios.paginator.num_pages }}</span>

                    {# νμ΄μ§€λ„¤μ΄μ… - λ‹¤μ #}
                    {% if portfolios.has_next %}
                        {# λ‹¤μ νμ΄μ§€κ°€ μμ„ λ•λ§ λ³΄μ„ #}
                        <a href="?page={{ portfolios.next_page_number }}&menu=portfolio"><i class="fa fa-angle-right"></i></a>
                        <a href="?page={{ portfolios.paginator.num_pages }}&menu=portfolio"><i class="fa fa-angle-double-right" aria-hidden="true"></i></a>
                    {% else %}
                        {# λ‹¤μ νμ΄μ§€κ°€ μ—†μ„ λ•λ§ λ³΄μ„ #}
                        <a href="#"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                        <a href="?page={{ portfolios.paginator.num_pages }}&menu=portfolio"><i class="fa fa-angle-double-right" aria-hidden="true"></i></a>
                    {% endif %}
                </p>
            {% else %} {# else: content_is_portfolio #}
               {# λ¦¬λ·° ν™”λ©΄μΈ κ²½μ° #}
                {% if reviews %}
                    {# λ¦¬λ·°κ°€ μλ” κ²½μ° #}
                    {% for review in reviews %}
                    <div style="display: inline-block; margin-left: 9%;">
                            <a href="{% url 'detail_review' review.id %}">
                                <img style="width: 10rem; height: 10rem;" src="{{ review.review_image.url }}" alt="λ¦¬λ·° μ΄λ―Έμ§€ {{ review.id }}">
                            </a>
                    </div>
                    {% endfor %}
                {% else %}
                    {# λ¦¬λ·°κ°€ μ—†λ” κ²½μ° #}
                    <div style="text-align: center;">λ¦¬λ·°κ°€ μ•„μ§ μ‘μ„±λμ§€ μ•μ•μµλ‹λ‹¤.</div>
                {% endif %}
                <p style="margin-left: 47%;">
                    {# νμ΄μ§€λ„¤μ΄μ… - μ΄μ „ #}
                    {% if reviews.has_previous %}
                        {# μ΄μ „ νμ΄μ§€κ°€ μμ„ λ•λ§ λ³΄μ„ #}
                        <a href="?page=1&menu=review"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
                        <a href="?page={{ reviews.previous_page_number }}&menu=review"><i class="fa fa-angle-left"></i></a>
                    {% else %}
                        {# μ΄μ „ νμ΄μ§€κ°€ μ—†μ„ λ• λ³΄μ„ #}
                        <a href="?page=1&menu=review"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
                    {% endif %}

                    {# νμ΄μ§€λ„¤μ΄μ… - μ¤‘μ•™ #}
                    <span>{{ reviews.number }}</span>
                    <span>/</span>
                    <span>{{ reviews.paginator.num_pages }}</span>

                    {# νμ΄μ§€λ„¤μ΄μ… - λ‹¤μ #}
                    {% if reviews.has_next %}
                        {# λ‹¤μ νμ΄μ§€κ°€ μμ„ λ•λ§ λ³΄μ„ #}
                        <a href="?page={{ reviews.next_page_number }}&menu=review"><i class="fa fa-angle-right"></i></a>
                        <a href="?page={{ reviews.paginator.num_pages }}&menu=review"><i class="fa fa-angle-double-right" aria-hidden="true"></i></a>
                    {% else %}
                        {# λ‹¤μ νμ΄μ§€κ°€ μ—†μ„ λ•λ§ λ³΄μ„ #}
                        <a href="#"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
                        <a href="?page={{ reviews.paginator.num_pages }}&menu=review"><i class="fa fa-angle-double-right" aria-hidden="true"></i></a>
                    {% endif %}
                </p>
            {% endif %} {# endif: content_is_portfolio #}
        </section>
     

    {% endif %} {# endif: not is_tattooist #}
{% endblock %}